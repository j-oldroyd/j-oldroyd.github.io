<?xml version="1.0" encoding="UTF-8" ?>

<!--********************************************************************

*********************************************************************-->
<!-- This file was originally part of the book     -->
<!-- (as copied on 2015/07/12)                     -->
<!--                                               -->
<!--   Abstract Algebra: Theory and Applications   -->
<!--                                               -->
<!-- Copyright (C) 1997-2014  Thomas W. Judson     -->

<chapter xml:id="chapter-norm-and-distance" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Norm and Distance</title>

  <section xml:id="section-norm">
    <title>Norm</title>
  </section>

  <section xml:id="section-distance">
    <title>Distance</title>
  </section>

  <section xml:id="section-standard-deviation">
    <title>Standard Deviation</title>
    <p>
      Given a vector <m>\xx</m>, we define the <term>de-meaned</term> vector <m>\tilde{\xx}</m> by
      <me>\tilde{\xx} = \xx - \mu\ones</me>
      where
      <me>\mu = \frac{1}{n}\ones^T\xx = \frac{1}{n}\sum_i x_i</me>.
      We then define the <term>standard deviation</term> of the entries of <m>\xx</m> by
      <me>\sigma(\xx) = \frac{\norm{\tilde{\xx}}}{\sqrt{n}}</me>.
    </p>
    <p>
      The standard deviation is a measure of the spread of the entries of <m>\xx</m> from the mean of the entries.
      The closer the standard deviation is to <m>0</m>, the less the entries differ from the mean.
    </p>
    <example xml:id="example-computing-standard-deviations">
      <title>Computing standard deviations</title>
      <statement>
        <p>
          Compute the standard deviations for each of the following vectors:
          <me>\xx_1 = \mqty[1 \\ 1 \\ 1], \xx_2 = \mqty[-1 \\ 1 \\ -1], \xx_3 = \mqty[2 \\ 1 \\ 0 \\ 4]</me>.
        </p>
      </statement>
      <p>
        The mean <m>\mu</m> and standard deviation <m>\sigma</m> of a vector satisfy the following formula:
        <me>\frac{\norm{\xx}^2}{n} = \mu^2 + \sigma^2</me>.
        The standard deviation also satisfies the following inequality.
      </p>
      <theorem xml:id="theorem-chebyshev-s-inequality">
        <title>Chebyshev's Inequality</title>
        <statement>
          <p>
            Suppose that <m>k</m> entries of <m>\xx</m> satisfy
            <me>\abs{x_i - \mu} > a</me>.
            Then
            <me>\frac{k}{n} \leq (\sigma/a)^2</me>.
          </p>
        </statement>
      </theorem>
      <p>
        This inequality can be rearranged to get
        <me>1 - \frac{k}{n} \geq 1 - \frac{\sigma^2}{a^2}</me>.
        The quantity on the left is the ratio of entries of <m>\xx</m> that are within <m>a</m> units of <m>\mu</m>.
        If we write <m>a = \alpha\sigma</m>, the inequality becomes
        <me>1 - \frac{k}{n} \geq 1 - \frac{1}{\alpha^2}</me>.
        For instance, this inequality tells us that the fraction of entries of <m>\xx</m> within two standard deviations (so <m>a = 2\sigma</m>) of the mean <m>\mu</m> is at least
        <me>1 - \frac{1}{2^2} = \frac{3}{4}</me>,
        or at least <m>75\%</m>.
        Conversely, at most <m>25\%</m> of entries are more than two standard deviations away from the mean.
      </p>
    </example>
    <p>
      Octave can compute the standard deviation as follows using the <c>std()</c> command.
    </p>
    <sage language="octave">
      <input>
        x = randn(1,100); # random vector of 100 entries
        std(x, 1) # we need the second argument to normalizr correctly
      </input>
    </sage>
    <example xml:id="example-return-and-risk-of-an-investment">
      <title>Return and risk of an investment</title>
      <statement>
        <p>
          Suppose that <m>\xx</m> is a vector whose entries represent a <em>time series</em> of returns from an investment over different periods.
          The mean return is <m>\mu = 5\%</m> and the standard deviation (or <em>risk</em>) is <m>\sigma = 2\%</m>.
          What is the largest possible fraction of periods that resulted in a loss?
        </p>
      </statement>
      <solution>
        <p>
          A loss is represented by any entry of <m>\xx</m> that is negative: <m>x_i \lt 0</m>.
          Since <m>\mu = 5\%</m>, this happens only if <m>\abs{x_i - \mu} > 5\%</m>.
        </p>
        <p>
          Here's how we can use Chebyshev's inequality to estimate the fraction of periods resulting in a loss.
          Recall that the fraction of entries of <m>\xx</m> such that <m>\abs{x_i-\mu} > a</m> satisfies
          <me>\frac{k}{n} \leq \parens{\frac{\sigma}{a}}^2</me>.
          In our case,
          <me>a = \mu = \frac{\mu}{\sigma}\sigma</me>
          and so
          <me>\frac{k}{n} \leq \parens{\frac{\sigma}{\mu}}^2 = \frac{4}{25}</me>.
        </p>
      </solution>
    </example>
    <p>
      The standard deviation satisfies the following properties:
      <me>\sigma(\xx+a\ones) = \sigma(\xx)</me>
      and
      <me>\sigma(a\xx) = \abs{a}\sigma(\xx)</me>.
    </p>
    <p>
      It's occasionally useful to <term>standardize</term> a vector <m>\xx</m> by replacing it with a vector <m>\zz</m> with mean <m>0</m> and standard deviation <m>1</m> by the following formula:
      <me>\zz = \frac{1}{\sigma}\parens{\xx - \mu\ones}</me>.
    </p>
    <example xml:id="example-standardizing-a-vector">
      <title>Standardizing a vector</title>
      <statement>
        <p>
          Standardize the vector
          <me>\xx = \mqty[1 \\ 2 \\ 8 \\ -5 \\ 10 \\ 8]</me>.
        </p>
      </statement>
      <solution>
        <p>
          We have <m>\mu = 4, \sigma = 5.1962</m> and so
          <me>\zz = \mqty[-0.5774 \\ -0.3849 \\ 0.7698 \\ -1.7321 \\  1.1547 \\  0.7698]</me>.
        </p>
      </solution>
    </example>
  </section>
  <section xml:id="section-angle">
      <title>Angle</title>
      <p>
        The inner product is closely related to the notion of the angle between two vectors.
        This is sometimes taken as the definition of the dot product in two and three dimensions, but more generally follows from the <em>Cauchy-Schwarz inequality</em>.
      </p>
      <theorem xml:id="theorem-cauchy-schwarz-inequality">
          <title>Cauchy-Schwarz Inequality</title>
          <statement>
            <p>
              <me>\abs{\vecm{a}^T\vecm{b}} \leq \norm{\vec{a}}\norm{\vec{b}}</me>.
            </p>
          </statement>
          <proof>
            <p>
              Note that <m>0\leq\norm{\norm{\vecm{b}}\vecm{a} + \norm{\vecm{a}}\vecm{b}}</m>.
            </p>
          </proof>
      </theorem>
      <p>
        We have equality in <xref ref="theorem-cauchy-schwarz-inequality" text="type-global" /> if and only if the vectors are scalar multiples of each other.
        Furthermore, if both vectors are nonzero then
        <me>-1\leq \frac{\vecm{a}^T\vecm{b}}{\norm{\vecm{a}}\norm{\vecm{b}}} \leq 1</me>,
        which falls inside the range of the cosine function.
      </p>
      <p>
        We can now define the <term>angle</term> between two vectors using the inner product:
        <me>\angle(\vecm{u},\vecm{v}) = \cos^{-1}\frac{\vecm{a}^T\vecm{b}}{\norm{\vecm{a}}\norm{\vecm{b}}}</me>.
        This measures how aligned the vectors <m>\uu</m> and <m>\vv</m> are.
      </p>
      <example xml:id="example-alignment-of-vectors">
          <title>Alignment of vectors</title>
          <statement>
              <p>
                  Determine the alignment of the following vectors:
                  <me>\uu = \mqty[1 \\ -2 \\ 0 \\ 3], \vv = \mqty[3 \\ 1 \\ -1 \\ -1]</me>.
              </p>
          </statement>
          <solution>
              <p>
                  We have <m>\angle(\uu,\vv) = 1.73</m>, which corresponds to an angle between <m>\frac{\pi}{2}</m> and <m>\pi</m>.
                  Hence the vectors meet at an obtuse angle.
              </p>
          </solution>
      </example>
      <p>
        When considering only unit vectors, the angle takes on another important interpretation: it represents distances between vectors.
      </p>
      <example xml:id="example-distances-on-the-unit-circle">
          <title>Distances on the unit circle</title>
          <statement>
              <p>
                  Compute pairwise distances between
                  <me>\uu_1 = \mqty[1\\0], \uu_2 = \mqty[\frac{1}{\sqrt{2}} \\ \frac{1}{\sqrt{2}}], \uu_3 = \mqty[-\frac{1}{\sqrt{2}} \\ -\frac{1}{\sqrt{2}}]</me>.
              </p>
          </statement>
      </example>
      <p>
        An important concept in statistics is the <em>correlation coefficient</em>.
        Given two vectors <m>\uu,\vv</m> with de-meaned representatives <m>\tilde{\uu}, \tilde{\vv}</m>, their correlation coefficient is defined to be <m>\angle(\tilde{u}, \tilde{v})</m>.
      </p>
  </section>
</chapter>
